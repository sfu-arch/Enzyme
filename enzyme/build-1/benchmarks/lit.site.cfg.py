# Autogenerated from /localhome/mha157/Enzyme/enzyme/benchmarks/lit.site.cfg.py.in
# Do not edit!

# Allow generated file to be relocatable.
def path(p):
    if not p: return ''
    return os.path.join(os.path.dirname(os.path.abspath(__file__)), p)


#config.llvm_src_root = ""
config.llvm_ver = "12"
config.llvm_obj_root = "/local-scratch/localhome/mha157/llvm-project/build"
config.llvm_tools_dir = "/local-scratch/localhome/mha157/llvm-project/build/./bin"
config.llvm_libs_dir = "/local-scratch/localhome/mha157/llvm-project/build/./lib"
config.enzyme_obj_root = "/localhome/mha157/Enzyme/enzyme/build"
config.target_triple = "x86_64-unknown-linux-gnu"
config.bench_flags = "-I/localhome/mha157/Enzyme/enzyme/build/benchmarks/adept2/src/adept2/include -I/localhome/mha157/Enzyme/enzyme/build/benchmarks/tapenade/src/tapenade"
config.bench_link = "/localhome/mha157/Enzyme/enzyme/build/benchmarks/tapenade/src/tapenade/adBuffer.o /localhome/mha157/Enzyme/enzyme/build/benchmarks/tapenade/src/tapenade/adStack.o -L/localhome/mha157/Enzyme/enzyme/build/benchmarks/adept2/install/lib -ladept"
config.bench_ldpath = "/localhome/mha157/Enzyme/enzyme/build/benchmarks/adept2/install/lib"
config.llvm_shlib_ext = ".so"


config.targets_to_build = " X86"

## Check the current platform with regex
import re
EAT_ERR_ON_X86 = ' '
if (re.match(r'^x86_64*', 'x86_64-unknown-linux-gnu') == None) :
  EAT_ERR_ON_X86 = '|| echo \"error is eaten\"'

for arch in config.targets_to_build.split():
    config.available_features.add(arch.lower() + '-registered-target')

# Support substitution of the tools and libs dirs with user parameters. This is
# used when we can't determine the tool dir at configuration time.
try:
    config.llvm_tools_dir = config.llvm_tools_dir % lit_config.params
    config.llvm_libs_dir = config.llvm_libs_dir % lit_config.params
except KeyError:
    e = sys.exc_info()[1]
    key, = e.args
    lit_config.fatal("unable to find %r parameter, use '--param=%s=VALUE'" % (key,key))

# excludes: A list of directories to exclude from the testsuite. The 'Inputs'
# subdirectories contain auxiliary inputs for various tests in their parent
# directories.
config.excludes = ['Inputs']

config.substitutions.append(('%shlibext', config.llvm_shlib_ext))
config.substitutions.append(('%lli', config.llvm_tools_dir + "/lli"))
config.substitutions.append(('%lli', config.llvm_tools_dir + "/lli"))
config.substitutions.append(('%bench', config.bench_flags))
config.substitutions.append(('%blink', config.bench_link))
config.substitutions.append(('%bldpath', config.bench_ldpath))
config.substitutions.append(('%clang', config.llvm_tools_dir + "/clang"))
config.substitutions.append(('%loadEnzyme', ''
                                 + ' -load=/localhome/mha157/Enzyme/enzyme/build/Enzyme/LLVMEnzyme-' + config.llvm_ver + config.llvm_shlib_ext
                                 + ' -enzyme-preopt=0 ' ))
config.substitutions.append(('%desired_wd', ''
                                     + "/localhome/mha157/Enzyme/enzyme/benchmarks/"
                                                                      ))

# Let the main config do the real work.
lit_config.load_config(config, "/localhome/mha157/Enzyme/enzyme/benchmarks/lit.cfg.py")
